<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>åŒ–å­¦å…ƒç´ é—¯å…³å¤§å†’é™©</title>
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Orbitron:wght@400;700;900&family=Noto+Sans+SC:wght@300;400;500;700&display=swap" rel="stylesheet">
    <style>
        :root {
            --bg-primary: #0a0e17;
            --bg-secondary: #111827;
            --bg-card: rgba(17, 24, 39, 0.8);
            --bg-card-hover: rgba(30, 41, 59, 0.9);
            --text-primary: #f0f4f8;
            --text-secondary: #94a3b8;
            --text-muted: #64748b;
            --accent-cyan: #06b6d4;
            --accent-cyan-glow: rgba(6, 182, 212, 0.4);
            --accent-emerald: #10b981;
            --accent-emerald-glow: rgba(16, 185, 129, 0.4);
            --accent-rose: #f43f5e;
            --accent-rose-glow: rgba(244, 63, 94, 0.4);
            --accent-amber: #f59e0b;
            --accent-violet: #8b5cf6;
            --accent-violet-glow: rgba(139, 92, 246, 0.4);
            --border-color: rgba(148, 163, 184, 0.1);
            --border-glow: rgba(6, 182, 212, 0.3);
            --shadow-lg: 0 25px 50px -12px rgba(0, 0, 0, 0.5);
            --shadow-glow: 0 0 40px var(--accent-cyan-glow);
            --radius-sm: 8px;
            --radius-md: 12px;
            --radius-lg: 20px;
            --radius-xl: 28px;
            --font-display: 'Orbitron', sans-serif;
            --font-body: 'Noto Sans SC', sans-serif;
            --transition-fast: 0.15s ease;
            --transition-normal: 0.3s ease;
            --transition-slow: 0.5s ease;
        }

        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: var(--font-body);
            background: var(--bg-primary);
            min-height: 100vh;
            color: var(--text-primary);
            overflow-x: hidden;
            position: relative;
        }

        body::before {
            content: '';
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: 
                radial-gradient(ellipse 80% 50% at 20% 20%, rgba(6, 182, 212, 0.08) 0%, transparent 50%),
                radial-gradient(ellipse 60% 40% at 80% 80%, rgba(139, 92, 246, 0.08) 0%, transparent 50%),
                radial-gradient(ellipse 40% 30% at 50% 50%, rgba(16, 185, 129, 0.05) 0%, transparent 50%);
            pointer-events: none;
            z-index: 0;
        }

        .particles {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            pointer-events: none;
            z-index: 0;
            overflow: hidden;
        }

        .particle {
            position: absolute;
            width: 4px;
            height: 4px;
            background: var(--accent-cyan);
            border-radius: 50%;
            opacity: 0.3;
            animation: float 15s infinite ease-in-out;
        }

        .particle:nth-child(2n) { background: var(--accent-violet); animation-delay: -2s; }
        .particle:nth-child(3n) { background: var(--accent-emerald); animation-delay: -4s; }
        .particle:nth-child(4n) { background: var(--accent-amber); animation-delay: -6s; }

        @keyframes float {
            0%, 100% { transform: translateY(100vh) rotate(0deg); opacity: 0; }
            10% { opacity: 0.3; }
            90% { opacity: 0.3; }
            100% { transform: translateY(-100vh) rotate(720deg); opacity: 0; }
        }

        .container {
            max-width: 1200px;
            margin: 0 auto;
            padding: 20px;
            position: relative;
            z-index: 1;
        }

        .btn {
            padding: 14px 32px;
            border: none;
            border-radius: var(--radius-lg);
            font-family: var(--font-body);
            font-size: 15px;
            font-weight: 500;
            cursor: pointer;
            transition: all var(--transition-normal);
            position: relative;
            overflow: hidden;
            letter-spacing: 0.5px;
        }

        .btn::before {
            content: '';
            position: absolute;
            top: 0;
            left: -100%;
            width: 100%;
            height: 100%;
            background: linear-gradient(90deg, transparent, rgba(255,255,255,0.2), transparent);
            transition: left 0.5s ease;
        }

        .btn:hover::before {
            left: 100%;
        }

        .btn-primary {
            background: linear-gradient(135deg, var(--accent-cyan) 0%, var(--accent-violet) 100%);
            color: white;
            box-shadow: 0 4px 20px var(--accent-cyan-glow);
        }

        .btn-primary:hover {
            transform: translateY(-3px);
            box-shadow: 0 8px 30px var(--accent-cyan-glow);
        }

        .btn-success {
            background: linear-gradient(135deg, var(--accent-emerald) 0%, #059669 100%);
            color: white;
            box-shadow: 0 4px 20px var(--accent-emerald-glow);
        }

        .btn-success:hover {
            transform: translateY(-3px);
            box-shadow: 0 8px 30px var(--accent-emerald-glow);
        }

        .btn-danger {
            background: linear-gradient(135deg, var(--accent-rose) 0%, #dc2626 100%);
            color: white;
            box-shadow: 0 4px 20px var(--accent-rose-glow);
        }

        .btn-danger:hover {
            transform: translateY(-3px);
            box-shadow: 0 8px 30px var(--accent-rose-glow);
        }

        .btn:disabled {
            opacity: 0.4;
            cursor: not-allowed;
            transform: none !important;
            box-shadow: none !important;
        }

        .page {
            display: none;
            animation: pageIn 0.6s ease;
        }

        .page.active {
            display: block;
        }

        @keyframes pageIn {
            from { 
                opacity: 0; 
                transform: translateY(30px) scale(0.98); 
            }
            to { 
                opacity: 1; 
                transform: translateY(0) scale(1); 
            }
        }

        .home-hero {
            text-align: center;
            padding: 60px 20px;
            position: relative;
        }

        .home-hero::before {
            content: '';
            position: absolute;
            top: 50%;
            left: 50%;
            transform: translate(-50%, -50%);
            width: 600px;
            height: 600px;
            background: radial-gradient(circle, var(--accent-cyan-glow) 0%, transparent 70%);
            opacity: 0.3;
            pointer-events: none;
        }

        .logo-container {
            position: relative;
            display: inline-block;
            margin-bottom: 30px;
        }

        .logo {
            font-family: var(--font-display);
            font-size: clamp(32px, 8vw, 56px);
            font-weight: 900;
            background: linear-gradient(135deg, var(--accent-cyan) 0%, var(--accent-violet) 50%, var(--accent-emerald) 100%);
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            background-clip: text;
            position: relative;
            letter-spacing: 2px;
        }

        .logo-glow {
            position: absolute;
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
            background: inherit;
            -webkit-background-clip: text;
            background-clip: text;
            filter: blur(20px);
            opacity: 0.5;
            animation: pulse 3s ease-in-out infinite;
        }

        @keyframes pulse {
            0%, 100% { opacity: 0.3; }
            50% { opacity: 0.6; }
        }

        .home-subtitle {
            font-size: 18px;
            color: var(--text-secondary);
            margin-bottom: 50px;
            letter-spacing: 1px;
        }

        .home-stats {
            display: flex;
            justify-content: center;
            gap: 40px;
            margin-bottom: 50px;
            flex-wrap: wrap;
        }

        .stat-item {
            text-align: center;
            padding: 20px 30px;
            background: var(--bg-card);
            border-radius: var(--radius-lg);
            border: 1px solid var(--border-color);
            backdrop-filter: blur(10px);
            min-width: 120px;
        }

        .stat-value {
            font-family: var(--font-display);
            font-size: 32px;
            font-weight: 700;
            color: var(--accent-cyan);
            margin-bottom: 5px;
        }

        .stat-label {
            font-size: 13px;
            color: var(--text-muted);
            text-transform: uppercase;
            letter-spacing: 1px;
        }

        .home-cards {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(240px, 1fr));
            gap: 24px;
            padding: 20px;
        }

        .home-card {
            background: var(--bg-card);
            border-radius: var(--radius-xl);
            padding: 40px 30px;
            text-align: center;
            cursor: pointer;
            transition: all var(--transition-normal);
            border: 1px solid var(--border-color);
            backdrop-filter: blur(10px);
            position: relative;
            overflow: hidden;
        }

        .home-card::before {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            right: 0;
            height: 3px;
            background: linear-gradient(90deg, var(--accent-cyan), var(--accent-violet));
            transform: scaleX(0);
            transition: transform var(--transition-normal);
        }

        .home-card:hover::before {
            transform: scaleX(1);
        }

        .home-card:hover {
            transform: translateY(-8px);
            border-color: var(--border-glow);
            box-shadow: var(--shadow-glow);
        }

        .home-card-icon {
            font-size: 48px;
            margin-bottom: 20px;
            display: block;
            filter: drop-shadow(0 0 20px currentColor);
        }

        .home-card-title {
            font-size: 20px;
            font-weight: 600;
            margin-bottom: 8px;
            color: var(--text-primary);
        }

        .home-card-desc {
            font-size: 14px;
            color: var(--text-muted);
        }

        .home-card.game { --card-accent: var(--accent-cyan); }
        .home-card.knowledge { --card-accent: var(--accent-emerald); }
        .home-card.wrong { --card-accent: var(--accent-rose); }
        .home-card.achievement { --card-accent: var(--accent-amber); }

        .home-card:hover .home-card-icon {
            animation: bounce 0.6s ease;
        }

        @keyframes bounce {
            0%, 100% { transform: translateY(0); }
            50% { transform: translateY(-10px); }
        }

        .page-header {
            text-align: center;
            padding: 40px 20px 30px;
        }

        .page-title {
            font-family: var(--font-display);
            font-size: clamp(24px, 5vw, 36px);
            font-weight: 700;
            background: linear-gradient(135deg, var(--accent-cyan) 0%, var(--accent-violet) 100%);
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            background-clip: text;
            margin-bottom: 12px;
        }

        .page-desc {
            font-size: 15px;
            color: var(--text-secondary);
        }

        .level-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(160px, 1fr));
            gap: 20px;
            padding: 20px;
        }

        .level-card {
            background: var(--bg-card);
            border-radius: var(--radius-xl);
            padding: 30px 20px;
            text-align: center;
            cursor: pointer;
            transition: all var(--transition-normal);
            border: 1px solid var(--border-color);
            position: relative;
            overflow: hidden;
            backdrop-filter: blur(10px);
        }

        .level-card.unlock {
            cursor: pointer;
        }

        .level-card.unlock:hover {
            transform: translateY(-5px) scale(1.02);
            border-color: var(--accent-cyan);
            box-shadow: 0 0 30px var(--accent-cyan-glow);
        }

        .level-card.lock {
            opacity: 0.5;
            cursor: not-allowed;
        }

        .level-card.lock::after {
            content: 'ğŸ”’';
            position: absolute;
            top: 50%;
            left: 50%;
            transform: translate(-50%, -50%);
            font-size: 40px;
            opacity: 0.8;
        }

        .level-card.lock .level-content {
            filter: blur(3px);
        }

        .level-number {
            font-family: var(--font-display);
            font-size: 28px;
            font-weight: 700;
            color: var(--accent-cyan);
            margin-bottom: 8px;
        }

        .level-name {
            font-size: 14px;
            color: var(--text-secondary);
            margin-bottom: 15px;
            line-height: 1.4;
        }

        .level-stars {
            font-size: 20px;
            letter-spacing: 2px;
        }

        .star-filled { color: var(--accent-amber); text-shadow: 0 0 10px var(--accent-amber); }
        .star-empty { color: var(--text-muted); opacity: 0.3; }

        .game-container {
            max-width: 900px;
            margin: 0 auto;
            padding: 20px;
        }

        .game-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            padding: 25px;
            background: var(--bg-card);
            border-radius: var(--radius-xl);
            margin-bottom: 30px;
            border: 1px solid var(--border-color);
            flex-wrap: wrap;
            gap: 20px;
            backdrop-filter: blur(10px);
        }

        .game-info {
            display: flex;
            gap: 30px;
            flex-wrap: wrap;
        }

        .info-item {
            text-align: center;
        }

        .info-label {
            font-size: 12px;
            color: var(--text-muted);
            text-transform: uppercase;
            letter-spacing: 1px;
            margin-bottom: 5px;
        }

        .info-value {
            font-family: var(--font-display);
            font-size: 22px;
            font-weight: 700;
            color: var(--accent-cyan);
        }

        .life-container {
            display: flex;
            gap: 8px;
            font-size: 28px;
        }

        .life-heart {
            transition: all var(--transition-fast);
        }

        .life-heart.lost {
            opacity: 0.2;
            transform: scale(0.8);
        }

        .question-card {
            background: var(--bg-card);
            border-radius: var(--radius-xl);
            padding: 40px 30px;
            margin-bottom: 30px;
            border: 1px solid var(--border-color);
            text-align: center;
            backdrop-filter: blur(10px);
            position: relative;
            overflow: hidden;
        }

        .question-card::before {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            right: 0;
            height: 4px;
            background: linear-gradient(90deg, var(--accent-cyan), var(--accent-violet), var(--accent-emerald));
        }

        .question-number {
            font-family: var(--font-display);
            font-size: 14px;
            color: var(--accent-cyan);
            margin-bottom: 15px;
            letter-spacing: 2px;
        }

        .question-text {
            font-size: clamp(18px, 4vw, 24px);
            font-weight: 500;
            color: var(--text-primary);
            line-height: 1.6;
        }

        .options-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
            gap: 16px;
            margin-bottom: 30px;
        }

        .option-btn {
            background: var(--bg-card);
            border: 2px solid var(--border-color);
            border-radius: var(--radius-lg);
            padding: 24px 20px;
            text-align: center;
            font-size: 18px;
            font-weight: 500;
            color: var(--text-primary);
            cursor: pointer;
            transition: all var(--transition-normal);
            backdrop-filter: blur(10px);
            font-family: var(--font-body);
        }

        .option-btn:hover:not(.disabled) {
            border-color: var(--accent-cyan);
            background: var(--bg-card-hover);
            transform: translateY(-3px);
            box-shadow: 0 10px 30px rgba(0, 0, 0, 0.3);
        }

        .option-btn.correct {
            background: linear-gradient(135deg, var(--accent-emerald) 0%, #059669 100%);
            border-color: var(--accent-emerald);
            color: white;
            animation: correctPulse 0.5s ease;
        }

        @keyframes correctPulse {
            0% { transform: scale(1); }
            50% { transform: scale(1.05); }
            100% { transform: scale(1); }
        }

        .option-btn.wrong {
            background: linear-gradient(135deg, var(--accent-rose) 0%, #dc2626 100%);
            border-color: var(--accent-rose);
            color: white;
            animation: wrongShake 0.5s ease;
        }

        @keyframes wrongShake {
            0%, 100% { transform: translateX(0); }
            20%, 60% { transform: translateX(-10px); }
            40%, 80% { transform: translateX(10px); }
        }

        .option-btn.disabled {
            cursor: not-allowed;
            opacity: 0.6;
        }

        .game-controls {
            display: flex;
            justify-content: center;
            gap: 16px;
            flex-wrap: wrap;
        }

        .timer-bar {
            width: 100%;
            height: 6px;
            background: var(--bg-secondary);
            border-radius: 3px;
            margin-bottom: 30px;
            overflow: hidden;
        }

        .timer-progress {
            height: 100%;
            background: linear-gradient(90deg, var(--accent-cyan), var(--accent-violet));
            border-radius: 3px;
            transition: width 1s linear;
        }

        .timer-progress.warning {
            background: linear-gradient(90deg, var(--accent-amber), var(--accent-rose));
        }

        .result-modal {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: rgba(0, 0, 0, 0.85);
            display: none;
            align-items: center;
            justify-content: center;
            z-index: 1000;
            backdrop-filter: blur(10px);
        }

        .result-modal.active {
            display: flex;
            animation: fadeIn 0.3s ease;
        }

        @keyframes fadeIn {
            from { opacity: 0; }
            to { opacity: 1; }
        }

        .result-card {
            background: var(--bg-secondary);
            border-radius: var(--radius-xl);
            padding: 50px 40px;
            text-align: center;
            max-width: 480px;
            width: 90%;
            border: 1px solid var(--border-color);
            animation: scaleIn 0.4s ease;
            position: relative;
            overflow: hidden;
        }

        .result-card::before {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            right: 0;
            height: 4px;
            background: linear-gradient(90deg, var(--accent-cyan), var(--accent-violet), var(--accent-emerald));
        }

        @keyframes scaleIn {
            from { transform: scale(0.8); opacity: 0; }
            to { transform: scale(1); opacity: 1; }
        }

        .result-icon {
            font-size: 64px;
            margin-bottom: 20px;
            animation: bounce 1s ease infinite;
        }

        .result-title {
            font-family: var(--font-display);
            font-size: 28px;
            font-weight: 700;
            color: var(--text-primary);
            margin-bottom: 20px;
        }

        .result-stats {
            display: flex;
            justify-content: center;
            gap: 30px;
            margin-bottom: 20px;
        }

        .result-stat {
            text-align: center;
        }

        .result-stat-value {
            font-family: var(--font-display);
            font-size: 24px;
            font-weight: 700;
            color: var(--accent-cyan);
        }

        .result-stat-label {
            font-size: 12px;
            color: var(--text-muted);
            text-transform: uppercase;
        }

        .result-stars {
            font-size: 40px;
            margin-bottom: 30px;
            letter-spacing: 5px;
        }

        .result-buttons {
            display: flex;
            justify-content: center;
            gap: 16px;
            flex-wrap: wrap;
        }

        .knowledge-section {
            padding: 20px;
        }

        .knowledge-card {
            background: var(--bg-card);
            border-radius: var(--radius-xl);
            padding: 30px;
            margin-bottom: 24px;
            border: 1px solid var(--border-color);
            backdrop-filter: blur(10px);
            transition: all var(--transition-normal);
        }

        .knowledge-card:hover {
            border-color: var(--border-glow);
            box-shadow: 0 0 30px rgba(6, 182, 212, 0.1);
        }

        .knowledge-title {
            font-family: var(--font-display);
            font-size: 18px;
            font-weight: 700;
            color: var(--accent-cyan);
            margin-bottom: 20px;
            display: flex;
            align-items: center;
            gap: 12px;
        }

        .knowledge-title::before {
            content: '';
            width: 4px;
            height: 24px;
            background: linear-gradient(180deg, var(--accent-cyan), var(--accent-violet));
            border-radius: 2px;
        }

        .knowledge-content {
            font-size: 15px;
            color: var(--text-secondary);
            line-height: 2;
        }

        .knowledge-content p {
            margin-bottom: 8px;
        }

        .wrong-list {
            padding: 20px;
        }

        .wrong-card {
            background: var(--bg-card);
            border-radius: var(--radius-xl);
            padding: 25px;
            margin-bottom: 20px;
            border-left: 4px solid var(--accent-rose);
            border-top: 1px solid var(--border-color);
            border-right: 1px solid var(--border-color);
            border-bottom: 1px solid var(--border-color);
            backdrop-filter: blur(10px);
        }

        .wrong-level {
            font-family: var(--font-display);
            font-size: 12px;
            color: var(--accent-rose);
            margin-bottom: 10px;
            letter-spacing: 1px;
        }

        .wrong-question {
            font-size: 16px;
            font-weight: 500;
            color: var(--text-primary);
            margin-bottom: 15px;
        }

        .wrong-answers {
            display: flex;
            gap: 20px;
            flex-wrap: wrap;
        }

        .wrong-answer-item {
            font-size: 14px;
        }

        .wrong-answer-item span {
            font-weight: 600;
        }

        .wrong-answer-item .your-answer {
            color: var(--accent-rose);
        }

        .wrong-answer-item .correct-answer {
            color: var(--accent-emerald);
        }

        .empty-state {
            text-align: center;
            padding: 60px 20px;
            color: var(--text-muted);
        }

        .empty-icon {
            font-size: 64px;
            margin-bottom: 20px;
            opacity: 0.5;
        }

        .empty-text {
            font-size: 18px;
        }

        .achievement-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
            gap: 20px;
            padding: 20px;
        }

        .achievement-card {
            background: var(--bg-card);
            border-radius: var(--radius-xl);
            padding: 30px 20px;
            text-align: center;
            border: 1px solid var(--border-color);
            backdrop-filter: blur(10px);
            transition: all var(--transition-normal);
            position: relative;
            overflow: hidden;
        }

        .achievement-card.unlock {
            border-color: var(--accent-amber);
            box-shadow: 0 0 30px rgba(245, 158, 11, 0.2);
        }

        .achievement-card.lock {
            opacity: 0.5;
        }

        .achievement-card.lock::after {
            content: 'ğŸ”’';
            position: absolute;
            top: 15px;
            right: 15px;
            font-size: 20px;
        }

        .achievement-icon {
            font-size: 48px;
            margin-bottom: 15px;
            display: block;
        }

        .achievement-card.unlock .achievement-icon {
            animation: float 3s ease-in-out infinite;
        }

        @keyframes float {
            0%, 100% { transform: translateY(0); }
            50% { transform: translateY(-8px); }
        }

        .achievement-name {
            font-family: var(--font-display);
            font-size: 16px;
            font-weight: 700;
            color: var(--text-primary);
            margin-bottom: 8px;
        }

        .achievement-desc {
            font-size: 13px;
            color: var(--text-muted);
        }

        .back-btn-container {
            text-align: center;
            padding: 30px 20px;
            display: flex;
            justify-content: center;
            gap: 16px;
            flex-wrap: wrap;
        }

        .progress-ring {
            position: fixed;
            top: 20px;
            right: 20px;
            background: var(--bg-card);
            border-radius: 50%;
            padding: 8px;
            border: 1px solid var(--border-color);
            backdrop-filter: blur(10px);
            z-index: 100;
        }

        .progress-ring circle {
            fill: none;
            stroke-width: 4;
        }

        .progress-ring .bg {
            stroke: var(--bg-secondary);
        }

        .progress-ring .progress {
            stroke: var(--accent-cyan);
            stroke-linecap: round;
            transform: rotate(-90deg);
            transform-origin: center;
            transition: stroke-dashoffset 0.5s ease;
        }

        .toast {
            position: fixed;
            bottom: 30px;
            left: 50%;
            transform: translateX(-50%) translateY(100px);
            background: var(--bg-card);
            border: 1px solid var(--border-color);
            border-radius: var(--radius-lg);
            padding: 16px 24px;
            color: var(--text-primary);
            font-size: 14px;
            z-index: 2000;
            opacity: 0;
            transition: all var(--transition-normal);
            backdrop-filter: blur(10px);
        }

        .toast.show {
            transform: translateX(-50%) translateY(0);
            opacity: 1;
        }

        .toast.success {
            border-color: var(--accent-emerald);
            box-shadow: 0 0 20px var(--accent-emerald-glow);
        }

        .toast.error {
            border-color: var(--accent-rose);
            box-shadow: 0 0 20px var(--accent-rose-glow);
        }

        @media (max-width: 768px) {
            .home-stats {
                gap: 20px;
            }

            .stat-item {
                min-width: 100px;
                padding: 15px 20px;
            }

            .game-header {
                flex-direction: column;
                text-align: center;
            }

            .game-info {
                justify-content: center;
            }

            .options-grid {
                grid-template-columns: 1fr;
            }

            .result-stats {
                flex-direction: column;
                gap: 15px;
            }
        }

        @media (prefers-reduced-motion: reduce) {
            *, *::before, *::after {
                animation-duration: 0.01ms !important;
                animation-iteration-count: 1 !important;
                transition-duration: 0.01ms !important;
            }
        }
    </style>
</head>
<body>
    <div class="particles" id="particles"></div>

    <div class="container">
        <div id="homePage" class="page active">
            <div class="home-hero">
                <div class="logo-container">
                    <h1 class="logo">åŒ–å­¦å…ƒç´ é—¯å…³å¤§å†’é™©</h1>
                    <div class="logo-glow"></div>
                </div>
                <p class="home-subtitle">åˆä¸­åŒ–å­¦8å…³çŸ¥è¯†ç‚¹ Â· è¾¹ç©è¾¹è®° Â· è½»æ¾æŒæ¡</p>
                
                <div class="home-stats">
                    <div class="stat-item">
                        <div class="stat-value" id="totalStars">0</div>
                        <div class="stat-label">æ€»æ˜Ÿæ•°</div>
                    </div>
                    <div class="stat-item">
                        <div class="stat-value" id="unlockedLevels">1</div>
                        <div class="stat-label">å·²è§£é”</div>
                    </div>
                    <div class="stat-item">
                        <div class="stat-value" id="achievementCount">0</div>
                        <div class="stat-label">æˆå°±</div>
                    </div>
                </div>
            </div>

            <div class="home-cards">
                <div class="home-card game" onclick="changePage('levelPage')">
                    <span class="home-card-icon">ğŸ®</span>
                    <h3 class="home-card-title">å¼€å§‹é—¯å…³</h3>
                    <p class="home-card-desc">æŒ‘æˆ˜8å…³åŒ–å­¦çŸ¥è¯†</p>
                </div>
                <div class="home-card knowledge" onclick="changePage('knowledgePage')">
                    <span class="home-card-icon">ğŸ“š</span>
                    <h3 class="home-card-title">çŸ¥è¯†ç‚¹ä»“åº“</h3>
                    <p class="home-card-desc">éšæ—¶å¤ä¹ å·©å›º</p>
                </div>
                <div class="home-card wrong" onclick="changePage('wrongPage')">
                    <span class="home-card-icon">ğŸ“</span>
                    <h3 class="home-card-title">é”™é¢˜æœ¬</h3>
                    <p class="home-card-desc">é’ˆå¯¹æ€§ç»ƒä¹ </p>
                </div>
                <div class="home-card achievement" onclick="changePage('achievementPage')">
                    <span class="home-card-icon">ğŸ†</span>
                    <h3 class="home-card-title">æˆå°±å¢™</h3>
                    <p class="home-card-desc">è®°å½•æˆé•¿ä¹‹è·¯</p>
                </div>
            </div>
        </div>

        <div id="levelPage" class="page">
            <div class="page-header">
                <h2 class="page-title">é€‰æ‹©å…³å¡</h2>
                <p class="page-desc">é€šå…³å‰ä¸€å…³å³å¯è§£é”ä¸‹ä¸€å…³ï¼Œå…¨3æ˜Ÿé€šå…³è§£é”ç»ˆææˆå°±ï¼</p>
            </div>
            <div class="level-grid" id="levelGrid"></div>
            <div class="back-btn-container">
                <button class="btn btn-primary" onclick="changePage('homePage')">è¿”å›é¦–é¡µ</button>
            </div>
        </div>

        <div id="gamePage" class="page">
            <div class="game-container">
                <div class="game-header">
                    <div class="game-info">
                        <div class="info-item">
                            <div class="info-label">å½“å‰å…³å¡</div>
                            <div class="info-value" id="currentLevel">ç¬¬1å…³</div>
                        </div>
                        <div class="info-item">
                            <div class="info-label">é¢˜ç›®è¿›åº¦</div>
                            <div class="info-value" id="questionProgress">1/10</div>
                        </div>
                        <div class="info-item">
                            <div class="info-label">å½“å‰ç§¯åˆ†</div>
                            <div class="info-value" id="currentScore">0</div>
                        </div>
                        <div class="info-item">
                            <div class="info-label">å‰©ä½™æ—¶é—´</div>
                            <div class="info-value" id="countDown">0s</div>
                        </div>
                    </div>
                    <div class="life-container" id="lifeBox">
                        <span class="life-heart">â¤ï¸</span>
                        <span class="life-heart">â¤ï¸</span>
                        <span class="life-heart">â¤ï¸</span>
                    </div>
                </div>

                <div class="timer-bar">
                    <div class="timer-progress" id="timerProgress"></div>
                </div>

                <div class="question-card">
                    <div class="question-number" id="questionNumber">QUESTION 01</div>
                    <div class="question-text" id="questionTitle"></div>
                </div>

                <div class="options-grid" id="optionsBox"></div>

                <div class="game-controls">
                    <button class="btn btn-primary" id="tipBtn" onclick="useTip()">ğŸ’¡ æç¤ºï¼ˆ3æ¬¡ï¼‰</button>
                    <button class="btn btn-danger" onclick="exitGame()">ğŸšª é€€å‡ºå…³å¡</button>
                </div>
            </div>
        </div>

        <div id="knowledgePage" class="page">
            <div class="page-header">
                <h2 class="page-title">çŸ¥è¯†ç‚¹ä»“åº“</h2>
                <p class="page-desc">8å…³æ ¸å¿ƒçŸ¥è¯†ç‚¹æ±‡æ€»ï¼Œéšæ—¶æŸ¥çœ‹ï¼Œéšæ—¶è®°å¿†</p>
            </div>

            <div class="knowledge-section">
                <div class="knowledge-card">
                    <h3 class="knowledge-title">ç¬¬1-2å…³ï¼š1-36å·å¸¸è§å…ƒç´ åç§°&ç¬¦å·</h3>
                    <div class="knowledge-content">
                        <p>1æ°¢H 2æ°¦He 3é”‚Li 4é“Be 5ç¡¼B 6ç¢³C 7æ°®N 8æ°§O 9æ°ŸF 10æ°–Ne</p>
                        <p>11é’ Na 12é•Mg 13é“Al 14ç¡…Si 15ç£·P 16ç¡«S 17æ°¯Cl 18æ°©Ar</p>
                        <p>25é”°Mn 26é“Fe 29é“œCu 30é”ŒZn 47é“¶Ag 53ç¢˜I 56é’¡Ba 79é‡‘Au 80æ±Hg 78é“‚Pt 35æº´Br 82é“…Pb</p>
                    </div>
                </div>

                <div class="knowledge-card">
                    <h3 class="knowledge-title">ç¬¬3å…³ï¼šå¸¸è§ç¦»å­ç¬¦å·</h3>
                    <div class="knowledge-content">
                        <p>é˜³ç¦»å­ï¼šHâºã€Naâºã€MgÂ²âºã€AlÂ³âºã€Kâºã€CaÂ²âºã€FeÂ³âºã€FeÂ²âºã€CuÂ²âºã€ZnÂ²âºã€Agâºã€BaÂ²âºã€NHâ‚„âº</p>
                        <p>é˜´ç¦»å­ï¼šOHâ»ã€NOâ‚ƒâ»ã€SOâ‚„Â²â»ã€COâ‚ƒÂ²â»ã€HCOâ‚ƒâ»ã€OÂ²â»ã€Fâ»ã€Clâ»</p>
                    </div>
                </div>

                <div class="knowledge-card">
                    <h3 class="knowledge-title">ç¬¬4å…³ï¼šåŒ–åˆä»·å£è¯€</h3>
                    <div class="knowledge-content">
                        <p>é’¾é’ é“¶æ°¢æ­£ä¸€ä»·ï¼›é’™é•é’¡é”Œæ­£äºŒä»·ï¼›</p>
                        <p>é‡‘å±é“ä¸ºæ­£ä¸‰ä»·ï¼›é“œä¸€äºŒï¼Œé“äºŒä¸‰ï¼›</p>
                        <p>æ°Ÿæ°¯æº´ç¢˜è´Ÿä¸€ä»·ï¼›äºŒå››å…­ç¡«äºŒå››ç¢³ï¼›</p>
                        <p>æ°®ç£·è´Ÿä¸‰å’Œæ­£äº”ï¼›å•è´¨åŒ–åˆä»·ä¸º0ã€‚</p>
                    </div>
                </div>

                <div class="knowledge-card">
                    <h3 class="knowledge-title">ç¬¬5-7å…³ï¼šåŒ–å­¦å¼ä¹¦å†™è§„åˆ™</h3>
                    <div class="knowledge-content">
                        <p>1. å•è´¨ï¼šç¨€æœ‰æ°”ä½“ã€é‡‘å±ã€å›ºæ€éé‡‘å±ï¼ˆçŸ³å­—æ—ï¼‰ç›´æ¥ç”¨å…ƒç´ ç¬¦å·è¡¨ç¤ºï¼›åŒåŸå­åˆ†å­ï¼šHâ‚‚ã€Nâ‚‚ã€Oâ‚‚ã€Fâ‚‚ã€Clâ‚‚ã€Brâ‚‚ã€Iâ‚‚ï¼›è‡­æ°§Oâ‚ƒ</p>
                        <p>2. åŒ–åˆç‰©ï¼šæ­£ä»·åœ¨å‰ï¼Œè´Ÿä»·åœ¨åï¼ŒåŒ–åˆä»·äº¤å‰çº¦ç®€ï¼ŒåŸå­å›¢å¤šä¸ªåŠ æ‹¬å·</p>
                        <p>3. æ°§åŒ–ç‰©ï¼šæ°§å…ƒç´ åœ¨åï¼Œè¯»ä½œ"å‡ æ°§åŒ–å‡ æŸ"ï¼Œå¦‚Hâ‚‚Oã€COâ‚‚ã€Feâ‚‚Oâ‚ƒ</p>
                        <p>4. æ°¯åŒ–ç‰©ï¼šæ°¯å…ƒç´ åœ¨åï¼Œè¯»ä½œ"æ°¯åŒ–æŸ"ï¼Œå¦‚NaClã€FeClâ‚ƒã€FeClâ‚‚</p>
                        <p>5. é…¸ï¼šæ°¢å…ƒç´ åœ¨å‰ï¼Œé…¸æ ¹åœ¨åï¼Œè¯»ä½œ"æŸé…¸"ï¼Œå¦‚Hâ‚‚SOâ‚„ã€HNOâ‚ƒã€HCl</p>
                        <p>6. ç¢±ï¼šé‡‘å±å…ƒç´ åœ¨å‰ï¼Œæ°¢æ°§æ ¹åœ¨åï¼Œè¯»ä½œ"æ°¢æ°§åŒ–æŸ"ï¼Œå¦‚NaOHã€Ca(OH)â‚‚</p>
                        <p>7. ç›ï¼šé‡‘å±/é“µæ ¹åœ¨å‰ï¼Œé…¸æ ¹åœ¨åï¼Œè¯»ä½œ"æŸé…¸æŸ"ï¼Œå¦‚Naâ‚‚SOâ‚„ã€Cu(NOâ‚ƒ)â‚‚</p>
                    </div>
                </div>

                <div class="knowledge-card">
                    <h3 class="knowledge-title">ç¬¬8å…³ï¼šåŒ–å­¦ç¬¦å·ä¸­æ•°å­—çš„æ„ä¹‰</h3>
                    <div class="knowledge-content">
                        <p>1. ç¬¦å·å‰é¢çš„æ•°å­—ï¼šè¡¨ç¤ºç²’å­çš„ä¸ªæ•°ï¼Œå¦‚2Hï¼š2ä¸ªæ°¢åŸå­ï¼›2Hâ‚‚Oï¼š2ä¸ªæ°´åˆ†å­</p>
                        <p>2. ç¬¦å·å³ä¸‹è§’çš„æ•°å­—ï¼šè¡¨ç¤º1ä¸ªåˆ†å­ä¸­è¯¥åŸå­çš„ä¸ªæ•°ï¼Œå¦‚Hâ‚‚ï¼š1ä¸ªæ°¢åˆ†å­å«2ä¸ªæ°¢åŸå­</p>
                        <p>3. ç¬¦å·å³ä¸Šè§’çš„æ•°å­—ï¼šè¡¨ç¤º1ä¸ªç¦»å­å¸¦çš„ç”µè·æ•°ï¼Œå¦‚CaÂ²âºï¼š1ä¸ªé’™ç¦»å­å¸¦2ä¸ªå•ä½æ­£ç”µè·</p>
                        <p>4. ç¬¦å·æ­£ä¸Šæ–¹çš„æ•°å­—ï¼šè¡¨ç¤ºè¯¥å…ƒç´ çš„åŒ–åˆä»·ï¼Œå¦‚Cu(+2)ï¼šé“œå…ƒç´ çš„åŒ–åˆä»·ä¸º+2ä»·</p>
                    </div>
                </div>
            </div>

            <div class="back-btn-container">
                <button class="btn btn-primary" onclick="changePage('homePage')">è¿”å›é¦–é¡µ</button>
            </div>
        </div>

        <div id="wrongPage" class="page">
            <div class="page-header">
                <h2 class="page-title">é”™é¢˜æœ¬</h2>
                <p class="page-desc">è‡ªåŠ¨è®°å½•æ‰€æœ‰ç­”é”™çš„é¢˜ç›®ï¼Œé’ˆå¯¹æ€§å·©å›ºç»ƒä¹ </p>
            </div>
            <div class="wrong-list" id="wrongList"></div>
            <div class="back-btn-container">
                <button class="btn btn-primary" onclick="changePage('homePage')">è¿”å›é¦–é¡µ</button>
                <button class="btn btn-danger" onclick="clearWrong()">ğŸ—‘ï¸ æ¸…ç©ºé”™é¢˜æœ¬</button>
            </div>
        </div>

        <div id="achievementPage" class="page">
            <div class="page-header">
                <h2 class="page-title">æˆå°±å¢™</h2>
                <p class="page-desc">è®°å½•ä½ çš„åŒ–å­¦å­¦ä¹ æˆé•¿ä¹‹è·¯</p>
            </div>
            <div class="achievement-grid" id="achievementGrid"></div>
            <div class="back-btn-container">
                <button class="btn btn-primary" onclick="changePage('homePage')">è¿”å›é¦–é¡µ</button>
            </div>
        </div>
    </div>

    <div class="result-modal" id="resultModal">
        <div class="result-card">
            <div class="result-icon" id="resultIcon">ğŸ‰</div>
            <h2 class="result-title" id="resultTitle">é—¯å…³æˆåŠŸï¼</h2>
            <div class="result-stats">
                <div class="result-stat">
                    <div class="result-stat-value" id="resultScore">0</div>
                    <div class="result-stat-label">å¾—åˆ†</div>
                </div>
                <div class="result-stat">
                    <div class="result-stat-value" id="resultCorrect">0%</div>
                    <div class="result-stat-label">æ­£ç¡®ç‡</div>
                </div>
            </div>
            <div class="result-stars" id="resultStar"></div>
            <div class="result-buttons">
                <button class="btn btn-success" onclick="closeResult()">ç¡®å®š</button>
                <button class="btn btn-primary" id="nextLevelBtn" onclick="nextLevel()">ä¸‹ä¸€å…³</button>
            </div>
        </div>
    </div>

    <div class="toast" id="toast"></div>

    <script>
        const STORAGE_KEY = 'cem_game_progress';
        
        const defaultData = {
            unlockLevel: 1,
            score: 0,
            totalScore: 0,
            life: 3,
            currentLevel: 1,
            currentQuestion: 0,
            tipCount: 3,
            timeLeft: 0,
            timer: null,
            totalTime: 0,
            wrongList: [],
            levelStar: [0, 0, 0, 0, 0, 0, 0, 0],
            achievement: [
                { id: 1, name: 'å…ƒç´ å…¥é—¨è€…', desc: 'é€šå…³ç¬¬1å…³', icon: 'ğŸŒ±', unlock: false },
                { id: 2, name: 'ç¬¦å·èƒ½æ‰‹', desc: 'é€šå…³ç¬¬3å…³', icon: 'âš¡', unlock: false },
                { id: 3, name: 'åŒ–åˆä»·å¤§å¸ˆ', desc: 'é€šå…³ç¬¬4å…³', icon: 'ğŸ¯', unlock: false },
                { id: 4, name: 'åŒ–å­¦å¼ç‹è€…', desc: 'é€šå…³ç¬¬7å…³', icon: 'ğŸ‘‘', unlock: false },
                { id: 5, name: 'åŒ–å­¦å…¨èƒ½ç‹', desc: 'é€šå…³å…¨éƒ¨8å…³', icon: 'ğŸ†', unlock: false },
                { id: 6, name: 'æ»¡åˆ†å­¦éœ¸', desc: 'ä»»æ„å…³å¡å…¨å¯¹é€šå…³', icon: 'ğŸ’¯', unlock: false },
                { id: 7, name: 'ä¸‰æ˜Ÿä¼ å¥‡', desc: 'å…¨éƒ¨å…³å¡3æ˜Ÿé€šå…³', icon: 'â­', unlock: false },
            ],
            questionBank: [
                [
                    { title: 'æ°¢å…ƒç´ çš„å…ƒç´ ç¬¦å·æ˜¯ï¼Ÿ', options: ['H', 'He', 'O', 'N'], answer: 'H' },
                    { title: 'å…ƒç´ ç¬¦å·Oå¯¹åº”çš„å…ƒç´ åç§°æ˜¯ï¼Ÿ', options: ['æ°¢', 'æ°§', 'ç¢³', 'æ°®'], answer: 'æ°§' },
                    { title: '11å·å…ƒç´ çš„åç§°å’Œç¬¦å·æ˜¯ï¼Ÿ', options: ['æ°– Ne', 'é’  Na', 'é• Mg', 'é“ Al'], answer: 'é’  Na' },
                    { title: 'ä¸‹åˆ—å…ƒç´ ç¬¦å·ä¹¦å†™æ­£ç¡®çš„æ˜¯ï¼Ÿ', options: ['æ°¯ cl', 'ç¢³ C', 'é“ AL', 'é’  na'], answer: 'ç¢³ C' },
                    { title: '17å·å…ƒç´ çš„å…ƒç´ ç¬¦å·æ˜¯ï¼Ÿ', options: ['S', 'Cl', 'Ar', 'P'], answer: 'Cl' },
                    { title: 'å…ƒç´ ç¬¦å·Heå¯¹åº”çš„å…ƒç´ åç§°æ˜¯ï¼Ÿ', options: ['æ°¢', 'æ°¦', 'é”‚', 'é“'], answer: 'æ°¦' },
                    { title: '6å·ç¢³å…ƒç´ çš„å…ƒç´ ç¬¦å·æ˜¯ï¼Ÿ', options: ['C', 'Ca', 'Cu', 'Cl'], answer: 'C' },
                    { title: '13å·é“å…ƒç´ çš„å…ƒç´ ç¬¦å·æ˜¯ï¼Ÿ', options: ['Al', 'Si', 'P', 'Mg'], answer: 'Al' },
                    { title: 'ä¸‹åˆ—å…ƒç´ å±äºç¬¬äºŒå‘¨æœŸçš„æ˜¯ï¼Ÿ', options: ['Na', 'O', 'S', 'Cl'], answer: 'O' },
                    { title: '18å·æ°©å…ƒç´ çš„å…ƒç´ ç¬¦å·æ˜¯ï¼Ÿ', options: ['Ar', 'Ne', 'He', 'Kr'], answer: 'Ar' },
                ],
                [
                    { title: 'é“å…ƒç´ çš„å…ƒç´ ç¬¦å·æ˜¯ï¼Ÿ', options: ['Fe', 'F', 'Cu', 'Zn'], answer: 'Fe' },
                    { title: 'é“œå…ƒç´ çš„å…ƒç´ ç¬¦å·æ˜¯ï¼Ÿ', options: ['Co', 'Cu', 'Ca', 'Cl'], answer: 'Cu' },
                    { title: 'å…ƒç´ ç¬¦å·Mnå¯¹åº”çš„å…ƒç´ åç§°æ˜¯ï¼Ÿ', options: ['é•', 'é”°', 'é”Œ', 'é“¶'], answer: 'é”°' },
                    { title: 'é‡‘å…ƒç´ çš„å…ƒç´ ç¬¦å·æ˜¯ï¼Ÿ', options: ['Au', 'Ag', 'Cu', 'Pt'], answer: 'Au' },
                    { title: 'å…ƒç´ ç¬¦å·Agå¯¹åº”çš„å…ƒç´ åç§°æ˜¯ï¼Ÿ', options: ['é‡‘', 'é“¶', 'é“œ', 'é”Œ'], answer: 'é“¶' },
                    { title: 'ç¢˜å…ƒç´ çš„å…ƒç´ ç¬¦å·æ˜¯ï¼Ÿ', options: ['I', 'Br', 'Cl', 'F'], answer: 'I' },
                    { title: 'å…ƒç´ ç¬¦å·Baå¯¹åº”çš„å…ƒç´ åç§°æ˜¯ï¼Ÿ', options: ['é’¡', 'é’™', 'é•', 'é”Œ'], answer: 'é’¡' },
                    { title: 'æ±å…ƒç´ ï¼ˆæ°´é“¶ï¼‰çš„å…ƒç´ ç¬¦å·æ˜¯ï¼Ÿ', options: ['Hg', 'Ag', 'Mg', 'H'], answer: 'Hg' },
                    { title: 'æº´å…ƒç´ çš„å…ƒç´ ç¬¦å·æ˜¯ï¼Ÿ', options: ['Br', 'I', 'Cl', 'S'], answer: 'Br' },
                    { title: 'é”Œå…ƒç´ çš„å…ƒç´ ç¬¦å·æ˜¯ï¼Ÿ', options: ['Zn', 'Cu', 'Fe', 'Mn'], answer: 'Zn' },
                ],
                [
                    { title: 'æ°¢æ°§æ ¹ç¦»å­çš„æ­£ç¡®ç¬¦å·æ˜¯ï¼Ÿ', options: ['OHâ»', 'HOâ»', 'OHâº', 'OHÂ²â»'], answer: 'OHâ»' },
                    { title: 'ç¡«é…¸æ ¹ç¦»å­çš„æ­£ç¡®ç¬¦å·æ˜¯ï¼Ÿ', options: ['SOâ‚„Â²â»', 'SOâ‚ƒÂ²â»', 'SOâ‚„â»', 'SÂ²â»'], answer: 'SOâ‚„Â²â»' },
                    { title: 'ç¡é…¸æ ¹ç¦»å­çš„æ­£ç¡®ç¬¦å·æ˜¯ï¼Ÿ', options: ['NOâ‚ƒâ»', 'NOâ‚‚â»', 'NOâ‚ƒÂ²â»', 'NHâ‚„âº'], answer: 'NOâ‚ƒâ»' },
                    { title: 'ç¢³é…¸æ ¹ç¦»å­çš„æ­£ç¡®ç¬¦å·æ˜¯ï¼Ÿ', options: ['COâ‚ƒÂ²â»', 'HCOâ‚ƒâ»', 'COâ‚ƒâ»', 'COÂ²â»'], answer: 'COâ‚ƒÂ²â»' },
                    { title: 'é“µæ ¹ç¦»å­çš„æ­£ç¡®ç¬¦å·æ˜¯ï¼Ÿ', options: ['NHâ‚„âº', 'NHâ‚ƒâº', 'NHâ‚„â»', 'NOâ‚ƒâ»'], answer: 'NHâ‚„âº' },
                    { title: 'é’ ç¦»å­çš„æ­£ç¡®ç¬¦å·æ˜¯ï¼Ÿ', options: ['Naâº', 'NaÂ²âº', 'Naâ»', 'Na'], answer: 'Naâº' },
                    { title: 'é“ç¦»å­çš„æ­£ç¡®ç¬¦å·æ˜¯ï¼Ÿ', options: ['FeÂ³âº', 'FeÂ²âº', 'Feâº', 'Fe'], answer: 'FeÂ³âº' },
                    { title: 'é“ç¦»å­çš„æ­£ç¡®ç¬¦å·æ˜¯ï¼Ÿ', options: ['AlÂ³âº', 'AlÂ²âº', 'Alâº', 'AlÂ³â»'], answer: 'AlÂ³âº' },
                    { title: 'æ°¯ç¦»å­çš„æ­£ç¡®ç¬¦å·æ˜¯ï¼Ÿ', options: ['Clâ»', 'Clâº', 'ClÂ²â»', 'Cl'], answer: 'Clâ»' },
                    { title: 'é’™ç¦»å­çš„æ­£ç¡®ç¬¦å·æ˜¯ï¼Ÿ', options: ['CaÂ²âº', 'Caâº', 'CaÂ²â»', 'Ca'], answer: 'CaÂ²âº' },
                ],
                [
                    { title: 'é’¾å…ƒç´ çš„å¸¸è§åŒ–åˆä»·æ˜¯ï¼Ÿ', options: ['+1', '+2', '-1', '0'], answer: '+1' },
                    { title: 'æ°§å…ƒç´ çš„å¸¸è§åŒ–åˆä»·æ˜¯ï¼Ÿ', options: ['-2', '-1', '+2', '0'], answer: '-2' },
                    { title: 'å•è´¨ä¸­å…ƒç´ çš„åŒ–åˆä»·æ˜¯ï¼Ÿ', options: ['0', '+1', '-1', 'æ ¹æ®ç‰©è´¨å®š'], answer: '0' },
                    { title: 'é“å…ƒç´ æœ‰+2å’Œ+3ä»·ï¼Œ+2ä»·çš„é“è¯»ä½œï¼Ÿ', options: ['äºšé“', 'é“', 'é«˜é“', 'äºšé“œ'], answer: 'äºšé“' },
                    { title: 'é“å…ƒç´ çš„å¸¸è§åŒ–åˆä»·æ˜¯ï¼Ÿ', options: ['+3', '+2', '+1', '-3'], answer: '+3' },
                    { title: 'æ°¯å…ƒç´ åœ¨æ°¯åŒ–ç‰©ä¸­çš„å¸¸è§åŒ–åˆä»·æ˜¯ï¼Ÿ', options: ['-1', '+1', '+5', '+7'], answer: '-1' },
                    { title: 'é’™é•é’¡é”Œå…ƒç´ çš„å¸¸è§åŒ–åˆä»·æ˜¯ï¼Ÿ', options: ['+2', '+1', '+3', '-2'], answer: '+2' },
                    { title: 'äºŒæ°§åŒ–ç¡«SOâ‚‚ä¸­ç¡«å…ƒç´ çš„åŒ–åˆä»·æ˜¯ï¼Ÿ', options: ['+4', '+2', '+6', '-2'], answer: '+4' },
                    { title: 'ä¸‹åˆ—å…ƒç´ åŒ–åˆä»·ä¸º+2ä»·çš„æ˜¯ï¼Ÿ', options: ['Mg', 'Na', 'Al', 'O'], answer: 'Mg' },
                    { title: 'æ°´ä¸­Hâ‚‚Oæ°¢å…ƒç´ çš„åŒ–åˆä»·æ˜¯ï¼Ÿ', options: ['+1', '-1', '+2', '0'], answer: '+1' },
                ],
                [
                    { title: 'æ°¦æ°”çš„æ­£ç¡®åŒ–å­¦å¼æ˜¯ï¼Ÿ', options: ['He', 'Heâ‚‚', 'H', 'Hâ‚‚'], answer: 'He' },
                    { title: 'æ°¢æ°”çš„æ­£ç¡®åŒ–å­¦å¼æ˜¯ï¼Ÿ', options: ['Hâ‚‚', 'H', 'He', 'Hâ‚ƒ'], answer: 'Hâ‚‚' },
                    { title: 'é‡‘å±é“çš„æ­£ç¡®åŒ–å­¦å¼æ˜¯ï¼Ÿ', options: ['Fe', 'Feâ‚‚', 'F', 'Feâ‚ƒ'], answer: 'Fe' },
                    { title: 'æ°§æ°”çš„æ­£ç¡®åŒ–å­¦å¼æ˜¯ï¼Ÿ', options: ['Oâ‚‚', 'O', 'Oâ‚ƒ', 'Oâ‚„'], answer: 'Oâ‚‚' },
                    { title: 'é‡‘åˆšçŸ³çš„æ­£ç¡®åŒ–å­¦å¼æ˜¯ï¼Ÿ', options: ['C', 'Câ‚‚', 'CO', 'COâ‚‚'], answer: 'C' },
                    { title: 'è‡­æ°§çš„æ­£ç¡®åŒ–å­¦å¼æ˜¯ï¼Ÿ', options: ['Oâ‚ƒ', 'Oâ‚‚', 'O', 'Oâ‚„'], answer: 'Oâ‚ƒ' },
                    { title: 'é‡‘å±é“œçš„æ­£ç¡®åŒ–å­¦å¼æ˜¯ï¼Ÿ', options: ['Cu', 'Cuâ‚‚', 'Co', 'Ca'], answer: 'Cu' },
                    { title: 'æ°¯æ°”çš„æ­£ç¡®åŒ–å­¦å¼æ˜¯ï¼Ÿ', options: ['Clâ‚‚', 'Cl', 'Clâ‚ƒ', 'C'], answer: 'Clâ‚‚' },
                    { title: 'æ°©æ°”çš„æ­£ç¡®åŒ–å­¦å¼æ˜¯ï¼Ÿ', options: ['Ar', 'Arâ‚‚', 'Al', 'A'], answer: 'Ar' },
                    { title: 'æ°´é“¶ï¼ˆæ±ï¼‰çš„æ­£ç¡®åŒ–å­¦å¼æ˜¯ï¼Ÿ', options: ['Hg', 'Ag', 'Mg', 'H'], answer: 'Hg' },
                ],
                [
                    { title: 'æ°´çš„æ­£ç¡®åŒ–å­¦å¼æ˜¯ï¼Ÿ', options: ['Hâ‚‚O', 'HO', 'Hâ‚‚Oâ‚‚', 'HOâ‚‚'], answer: 'Hâ‚‚O' },
                    { title: 'äºŒæ°§åŒ–ç¢³çš„æ­£ç¡®åŒ–å­¦å¼æ˜¯ï¼Ÿ', options: ['COâ‚‚', 'CO', 'Câ‚‚O', 'COâ‚ƒ'], answer: 'COâ‚‚' },
                    { title: 'æ°¯åŒ–é’ çš„æ­£ç¡®åŒ–å­¦å¼æ˜¯ï¼Ÿ', options: ['NaCl', 'Naâ‚‚Cl', 'NaClâ‚‚', 'Na Cl'], answer: 'NaCl' },
                    { title: 'æ°§åŒ–é“ï¼ˆä¸‰æ°§åŒ–äºŒé“ï¼‰çš„æ­£ç¡®åŒ–å­¦å¼æ˜¯ï¼Ÿ', options: ['Feâ‚‚Oâ‚ƒ', 'FeO', 'Feâ‚ƒOâ‚„', 'FeOâ‚‚'], answer: 'Feâ‚‚Oâ‚ƒ' },
                    { title: 'æ°§åŒ–é•çš„æ­£ç¡®åŒ–å­¦å¼æ˜¯ï¼Ÿ', options: ['MgO', 'Mgâ‚‚O', 'MgOâ‚‚', 'Mg'], answer: 'MgO' },
                    { title: 'äº”æ°§åŒ–äºŒç£·çš„æ­£ç¡®åŒ–å­¦å¼æ˜¯ï¼Ÿ', options: ['Pâ‚‚Oâ‚…', 'POâ‚…', 'Pâ‚…Oâ‚‚', 'PO'], answer: 'Pâ‚‚Oâ‚…' },
                    { title: 'æ°¯åŒ–é“çš„æ­£ç¡®åŒ–å­¦å¼æ˜¯ï¼Ÿ', options: ['FeClâ‚ƒ', 'FeClâ‚‚', 'FeCl', 'Feâ‚ƒCl'], answer: 'FeClâ‚ƒ' },
                    { title: 'äºŒæ°§åŒ–ç¡«çš„æ­£ç¡®åŒ–å­¦å¼æ˜¯ï¼Ÿ', options: ['SOâ‚‚', 'SOâ‚ƒ', 'Sâ‚‚O', 'SO'], answer: 'SOâ‚‚' },
                    { title: 'æ°§åŒ–é“çš„æ­£ç¡®åŒ–å­¦å¼æ˜¯ï¼Ÿ', options: ['Alâ‚‚Oâ‚ƒ', 'AlO', 'AlOâ‚‚', 'Alâ‚ƒOâ‚‚'], answer: 'Alâ‚‚Oâ‚ƒ' },
                    { title: 'æ°¯åŒ–é•çš„æ­£ç¡®åŒ–å­¦å¼æ˜¯ï¼Ÿ', options: ['MgClâ‚‚', 'MgCl', 'Mgâ‚‚Cl', 'MgClâ‚ƒ'], answer: 'MgClâ‚‚' },
                ],
                [
                    { title: 'ç¡«é…¸é’ çš„æ­£ç¡®åŒ–å­¦å¼æ˜¯ï¼Ÿ', options: ['Naâ‚‚SOâ‚„', 'NaSOâ‚„', 'Naâ‚‚SOâ‚ƒ', 'NaSOâ‚ƒ'], answer: 'Naâ‚‚SOâ‚„' },
                    { title: 'ç¡é…¸é’¾çš„æ­£ç¡®åŒ–å­¦å¼æ˜¯ï¼Ÿ', options: ['KNOâ‚ƒ', 'KNOâ‚‚', 'Kâ‚‚NOâ‚ƒ', 'KNO'], answer: 'KNOâ‚ƒ' },
                    { title: 'æ°¢æ°§åŒ–é’ çš„æ­£ç¡®åŒ–å­¦å¼æ˜¯ï¼Ÿ', options: ['NaOH', 'Naâ‚‚OH', 'NaOHâ‚‚', 'NaHO'], answer: 'NaOH' },
                    { title: 'ç¡«é…¸çš„æ­£ç¡®åŒ–å­¦å¼æ˜¯ï¼Ÿ', options: ['Hâ‚‚SOâ‚„', 'HSOâ‚„', 'Hâ‚‚SOâ‚ƒ', 'HSOâ‚ƒ'], answer: 'Hâ‚‚SOâ‚„' },
                    { title: 'ç¢³é…¸é’™çš„æ­£ç¡®åŒ–å­¦å¼æ˜¯ï¼Ÿ', options: ['CaCOâ‚ƒ', 'CaHCOâ‚ƒ', 'Caâ‚‚COâ‚ƒ', 'CaCOâ‚‚'], answer: 'CaCOâ‚ƒ' },
                    { title: 'æ°¢æ°§åŒ–é’™çš„æ­£ç¡®åŒ–å­¦å¼æ˜¯ï¼Ÿ', options: ['Ca(OH)â‚‚', 'CaOH', 'CaOHâ‚‚', 'Ca(OH)'], answer: 'Ca(OH)â‚‚' },
                    { title: 'ç¡é…¸é“œçš„æ­£ç¡®åŒ–å­¦å¼æ˜¯ï¼Ÿ', options: ['Cu(NOâ‚ƒ)â‚‚', 'CuNOâ‚ƒ', 'Cu(NOâ‚ƒ)', 'CuNOâ‚‚'], answer: 'Cu(NOâ‚ƒ)â‚‚' },
                    { title: 'ç›é…¸çš„æ­£ç¡®åŒ–å­¦å¼æ˜¯ï¼Ÿ', options: ['HCl', 'Hâ‚‚Cl', 'HClO', 'HClOâ‚ƒ'], answer: 'HCl' },
                    { title: 'ç¡«é…¸äºšé“çš„æ­£ç¡®åŒ–å­¦å¼æ˜¯ï¼Ÿ', options: ['FeSOâ‚„', 'Feâ‚‚(SOâ‚„)â‚ƒ', 'FeSOâ‚ƒ', 'Feâ‚‚(SOâ‚ƒ)â‚ƒ'], answer: 'FeSOâ‚„' },
                    { title: 'ç¢³é…¸é’ çš„æ­£ç¡®åŒ–å­¦å¼æ˜¯ï¼Ÿ', options: ['Naâ‚‚COâ‚ƒ', 'NaHCOâ‚ƒ', 'NaCOâ‚ƒ', 'Naâ‚‚HCOâ‚ƒ'], answer: 'Naâ‚‚COâ‚ƒ' },
                ],
                [
                    { title: 'Clâ‚‚ä¸­æ•°å­—2çš„æ„ä¹‰æ˜¯ï¼Ÿ', options: ['1ä¸ªæ°¯åˆ†å­å«2ä¸ªæ°¯åŸå­', '2ä¸ªæ°¯åŸå­', '2ä¸ªæ°¯åˆ†å­', 'æ°¯å…ƒç´ åŒ–åˆä»·ä¸º-2'], answer: '1ä¸ªæ°¯åˆ†å­å«2ä¸ªæ°¯åŸå­' },
                    { title: '2Hä¸­æ•°å­—2çš„æ„ä¹‰æ˜¯ï¼Ÿ', options: ['2ä¸ªæ°¢åŸå­', '1ä¸ªæ°¢åˆ†å­å«2ä¸ªæ°¢åŸå­', '2ä¸ªæ°¢åˆ†å­', 'æ°¢å…ƒç´ åŒ–åˆä»·ä¸º+2'], answer: '2ä¸ªæ°¢åŸå­' },
                    { title: 'CaÂ²âºä¸­æ•°å­—2çš„æ„ä¹‰æ˜¯ï¼Ÿ', options: ['1ä¸ªé’™ç¦»å­å¸¦2ä¸ªå•ä½æ­£ç”µè·', '2ä¸ªé’™åŸå­', 'é’™å…ƒç´ åŒ–åˆä»·ä¸º+2', '2ä¸ªé’™ç¦»å­'], answer: '1ä¸ªé’™ç¦»å­å¸¦2ä¸ªå•ä½æ­£ç”µè·' },
                    { title: 'æ°®æ°”Nâ‚‚ä¸­æ°®å…ƒç´ çš„åŒ–åˆä»·æ˜¯ï¼Ÿ', options: ['0', '-3', '+2', '+5'], answer: '0' },
                    { title: 'ç¡é…¸HNOâ‚ƒä¸­æ°®å…ƒç´ çš„åŒ–åˆä»·æ˜¯ï¼Ÿ', options: ['+5', '+3', '-3', '+2'], answer: '+5' },
                    { title: '2SOâ‚ƒä¸­å‰é¢çš„æ•°å­—2çš„æ„ä¹‰æ˜¯ï¼Ÿ', options: ['2ä¸ªä¸‰æ°§åŒ–ç¡«åˆ†å­', '1ä¸ªä¸‰æ°§åŒ–ç¡«åˆ†å­å«2ä¸ªç¡«åŸå­', '2ä¸ªç¡«åŸå­', 'ç¡«å…ƒç´ åŒ–åˆä»·ä¸º+2'], answer: '2ä¸ªä¸‰æ°§åŒ–ç¡«åˆ†å­' },
                    { title: 'äºŒæ°§åŒ–ç¡«SOâ‚‚ä¸­ç¡«å…ƒç´ çš„åŒ–åˆä»·æ˜¯ï¼Ÿ', options: ['+4', '+2', '+6', '-2'], answer: '+4' },
                    { title: 'Cu(+2)ä¸­æ•°å­—2çš„æ„ä¹‰æ˜¯ï¼Ÿ', options: ['é“œå…ƒç´ çš„åŒ–åˆä»·ä¸º+2ä»·', '1ä¸ªé“œç¦»å­å¸¦2ä¸ªå•ä½æ­£ç”µè·', '2ä¸ªé“œåŸå­', '2ä¸ªé“œåˆ†å­'], answer: 'é“œå…ƒç´ çš„åŒ–åˆä»·ä¸º+2ä»·' },
                    { title: 'æ°¯åŒ–æ°¢HClä¸­æ°¯å…ƒç´ çš„åŒ–åˆä»·æ˜¯ï¼Ÿ', options: ['-1', '+1', '+5', '+7'], answer: '-1' },
                    { title: 'NHâ‚„NOâ‚ƒä¸­é“µæ ¹é‡Œçš„æ°®å…ƒç´ åŒ–åˆä»·æ˜¯ï¼Ÿ', options: ['-3', '+5', '+3', '0'], answer: '-3' },
                ],
            ],
            levelTime: [90, 60, 80, 90, 70, 100, 120, 100],
            levelName: [
                '1-18å·å…ƒç´ å¯è’™',
                'æ‹“å±•å…ƒç´ ç¬¦å·',
                'å¸¸è§ç¦»å­ç¬¦å·',
                'å…ƒç´ åŒ–åˆä»·',
                'å•è´¨åŒ–å­¦å¼',
                'æ°§åŒ–ç‰©&æ°¯åŒ–ç‰©',
                'é…¸ç¢±ç›åŒ–å­¦å¼',
                'åŒ–å­¦ç¬¦å·ç»¼åˆåº”ç”¨'
            ]
        };

        let gameData = loadProgress();

        function loadProgress() {
            try {
                const saved = localStorage.getItem(STORAGE_KEY);
                if (saved) {
                    const parsed = JSON.parse(saved);
                    return { ...defaultData, ...parsed, timer: null };
                }
            } catch (e) {
                console.error('Failed to load progress:', e);
            }
            return { ...defaultData };
        }

        function saveProgress() {
            try {
                const toSave = {
                    unlockLevel: gameData.unlockLevel,
                    levelStar: gameData.levelStar,
                    wrongList: gameData.wrongList,
                    achievement: gameData.achievement,
                    totalScore: gameData.totalScore
                };
                localStorage.setItem(STORAGE_KEY, JSON.stringify(toSave));
            } catch (e) {
                console.error('Failed to save progress:', e);
            }
        }

        function showToast(message, type = 'success') {
            const toast = document.getElementById('toast');
            toast.textContent = message;
            toast.className = 'toast ' + type;
            toast.classList.add('show');
            setTimeout(() => {
                toast.classList.remove('show');
            }, 3000);
        }

        function createParticles() {
            const container = document.getElementById('particles');
            for (let i = 0; i < 30; i++) {
                const particle = document.createElement('div');
                particle.className = 'particle';
                particle.style.left = Math.random() * 100 + '%';
                particle.style.animationDelay = Math.random() * 15 + 's';
                particle.style.animationDuration = (15 + Math.random() * 10) + 's';
                container.appendChild(particle);
            }
        }

        function updateHomeStats() {
            const totalStars = gameData.levelStar.reduce((a, b) => a + b, 0);
            document.getElementById('totalStars').textContent = totalStars;
            document.getElementById('unlockedLevels').textContent = gameData.unlockLevel;
            const achievementCount = gameData.achievement.filter(a => a.unlock).length;
            document.getElementById('achievementCount').textContent = achievementCount;
        }

        function changePage(pageId) {
            document.querySelectorAll('.page').forEach(page => {
                page.classList.remove('active');
            });
            document.getElementById(pageId).classList.add('active');
            
            if (pageId === 'levelPage') renderLevelGrid();
            if (pageId === 'wrongPage') renderWrongList();
            if (pageId === 'achievementPage') renderAchievement();
            if (pageId === 'homePage') updateHomeStats();
        }

        function renderLevelGrid() {
            const grid = document.getElementById('levelGrid');
            grid.innerHTML = '';
            
            for (let i = 0; i < 8; i++) {
                const levelNum = i + 1;
                const isUnlock = levelNum <= gameData.unlockLevel;
                const star = gameData.levelStar[i];
                
                const card = document.createElement('div');
                card.className = 'level-card ' + (isUnlock ? 'unlock' : 'lock');
                
                let starsHtml = '';
                for (let j = 0; j < 3; j++) {
                    starsHtml += j < star 
                        ? '<span class="star-filled">â˜…</span>' 
                        : '<span class="star-empty">â˜†</span>';
                }
                
                card.innerHTML = `
                    <div class="level-content">
                        <div class="level-number">ç¬¬${levelNum}å…³</div>
                        <div class="level-name">${gameData.levelName[i]}</div>
                        <div class="level-stars">${starsHtml}</div>
                    </div>
                `;
                
                if (isUnlock) {
                    card.addEventListener('click', () => startGame(levelNum));
                }
                
                grid.appendChild(card);
            }
        }

        function startGame(levelNum) {
            gameData.currentLevel = levelNum;
            gameData.currentQuestion = 0;
            gameData.score = 0;
            gameData.life = 3;
            gameData.tipCount = 3;
            gameData.totalTime = gameData.levelTime[levelNum - 1];
            gameData.timeLeft = gameData.totalTime;
            
            if (gameData.timer) clearInterval(gameData.timer);
            
            renderQuestion();
            startTimer();
            changePage('gamePage');
            
            document.getElementById('currentLevel').textContent = 'ç¬¬' + levelNum + 'å…³';
            document.getElementById('tipBtn').textContent = 'ğŸ’¡ æç¤ºï¼ˆ' + gameData.tipCount + 'æ¬¡ï¼‰';
            updateLife();
            updateScore();
            updateProgress();
            updateTimerBar();
        }

        function renderQuestion() {
            const currentQ = gameData.questionBank[gameData.currentLevel - 1][gameData.currentQuestion];
            document.getElementById('questionTitle').textContent = currentQ.title;
            document.getElementById('questionNumber').textContent = 'QUESTION ' + String(gameData.currentQuestion + 1).padStart(2, '0');
            
            const shuffledOptions = [...currentQ.options].sort(() => Math.random() - 0.5);
            const optionsBox = document.getElementById('optionsBox');
            optionsBox.innerHTML = '';
            
            shuffledOptions.forEach(option => {
                const btn = document.createElement('button');
                btn.className = 'option-btn';
                btn.textContent = option;
                btn.addEventListener('click', function() {
                    checkAnswer(this, option, currentQ.answer);
                });
                optionsBox.appendChild(btn);
            });
        }

        function checkAnswer(elem, selected, answer) {
            const options = document.querySelectorAll('.option-btn');
            options.forEach(opt => {
                opt.classList.add('disabled');
            });
            
            const isCorrect = selected === answer;
            
            if (isCorrect) {
                elem.classList.add('correct');
                gameData.score += 10;
            } else {
                elem.classList.add('wrong');
                
                options.forEach(opt => {
                    if (opt.textContent === answer) {
                        opt.classList.add('correct');
                    }
                });
                
                gameData.life -= 1;
                updateLife();
                
                const currentQ = gameData.questionBank[gameData.currentLevel - 1][gameData.currentQuestion];
                gameData.wrongList.push({
                    level: gameData.currentLevel,
                    title: currentQ.title,
                    wrongAnswer: selected,
                    correctAnswer: answer
                });
            }
            
            updateScore();
            
            setTimeout(() => {
                nextQuestion();
            }, 1500);
        }

        function nextQuestion() {
            gameData.currentQuestion += 1;
            const totalQuestion = gameData.questionBank[gameData.currentLevel - 1].length;
            
            if (gameData.currentQuestion >= totalQuestion || gameData.life <= 0) {
                endGame();
                return;
            }
            
            renderQuestion();
            updateProgress();
        }

        function startTimer() {
            if (gameData.timer) clearInterval(gameData.timer);
            
            gameData.timer = setInterval(() => {
                gameData.timeLeft -= 1;
                document.getElementById('countDown').textContent = gameData.timeLeft + 's';
                updateTimerBar();
                
                if (gameData.timeLeft <= 0) {
                    endGame();
                }
            }, 1000);
        }

        function updateTimerBar() {
            const progress = document.getElementById('timerProgress');
            const percent = (gameData.timeLeft / gameData.totalTime) * 100;
            progress.style.width = percent + '%';
            
            if (percent < 30) {
                progress.classList.add('warning');
            } else {
                progress.classList.remove('warning');
            }
        }

        function updateLife() {
            const hearts = document.querySelectorAll('.life-heart');
            hearts.forEach((heart, index) => {
                if (index < gameData.life) {
                    heart.classList.remove('lost');
                } else {
                    heart.classList.add('lost');
                }
            });
        }

        function updateScore() {
            document.getElementById('currentScore').textContent = gameData.score;
        }

        function updateProgress() {
            const total = gameData.questionBank[gameData.currentLevel - 1].length;
            document.getElementById('questionProgress').textContent = (gameData.currentQuestion + 1) + '/' + total;
        }

        function useTip() {
            if (gameData.tipCount <= 0) {
                showToast('æç¤ºæ¬¡æ•°å·²ç”¨å®Œï¼', 'error');
                return;
            }
            
            const currentQ = gameData.questionBank[gameData.currentLevel - 1][gameData.currentQuestion];
            const wrongOptions = currentQ.options.filter(opt => opt !== currentQ.answer);
            
            if (wrongOptions.length > 0) {
                const options = document.querySelectorAll('.option-btn');
                const toRemove = wrongOptions.slice(0, 1)[0];
                
                options.forEach(opt => {
                    if (opt.textContent === toRemove) {
                        opt.classList.add('disabled');
                        opt.style.opacity = '0.3';
                    }
                });
                
                gameData.tipCount -= 1;
                document.getElementById('tipBtn').textContent = 'ğŸ’¡ æç¤ºï¼ˆ' + gameData.tipCount + 'æ¬¡ï¼‰';
                showToast('å·²æ’é™¤ä¸€ä¸ªé”™è¯¯é€‰é¡¹ï¼', 'success');
            }
        }

        function exitGame() {
            if (gameData.timer) clearInterval(gameData.timer);
            saveProgress();
            changePage('homePage');
        }

        function endGame() {
            if (gameData.timer) clearInterval(gameData.timer);
            
            const totalQuestion = gameData.questionBank[gameData.currentLevel - 1].length;
            const correctCount = gameData.score / 10;
            const correctRate = Math.round((correctCount / totalQuestion) * 100);
            
            let star = 0;
            if (correctRate >= 100) star = 3;
            else if (correctRate >= 80) star = 2;
            else if (correctRate >= 60) star = 1;
            
            const isPass = gameData.life > 0 && correctRate >= 60;
            
            if (isPass) {
                if (gameData.currentLevel >= gameData.unlockLevel) {
                    gameData.unlockLevel = Math.min(gameData.currentLevel + 1, 8);
                }
                
                if (star > gameData.levelStar[gameData.currentLevel - 1]) {
                    gameData.levelStar[gameData.currentLevel - 1] = star;
                }
                
                if (gameData.currentLevel === 1) gameData.achievement.find(item => item.id === 1).unlock = true;
                if (gameData.currentLevel === 3) gameData.achievement.find(item => item.id === 2).unlock = true;
                if (gameData.currentLevel === 4) gameData.achievement.find(item => item.id === 3).unlock = true;
                if (gameData.currentLevel === 7) gameData.achievement.find(item => item.id === 4).unlock = true;
                if (gameData.unlockLevel > 8) gameData.achievement.find(item => item.id === 5).unlock = true;
                if (gameData.levelStar.every(s => s === 3)) gameData.achievement.find(item => item.id === 7).unlock = true;
            }
            
            if (correctRate === 100 && gameData.life === 3) {
                gameData.achievement.find(item => item.id === 6).unlock = true;
            }
            
            saveProgress();
            
            let starsHtml = '';
            for (let i = 0; i < 3; i++) {
                starsHtml += i < star ? '<span class="star-filled">â˜…</span>' : '<span class="star-empty">â˜†</span>';
            }
            
            document.getElementById('resultIcon').textContent = isPass ? 'ğŸ‰' : 'ğŸ˜¢';
            document.getElementById('resultTitle').textContent = isPass 
                ? 'ç¬¬' + gameData.currentLevel + 'å…³ é—¯å…³æˆåŠŸï¼' 
                : 'ç¬¬' + gameData.currentLevel + 'å…³ æŒ‘æˆ˜å¤±è´¥';
            document.getElementById('resultScore').textContent = gameData.score;
            document.getElementById('resultCorrect').textContent = correctRate + '%';
            document.getElementById('resultStar').innerHTML = starsHtml;
            
            const nextBtn = document.getElementById('nextLevelBtn');
            nextBtn.style.display = isPass && gameData.currentLevel < 8 ? 'inline-block' : 'none';
            
            document.getElementById('resultModal').classList.add('active');
        }

        function closeResult() {
            document.getElementById('resultModal').classList.remove('active');
            changePage('homePage');
        }

        function nextLevel() {
            document.getElementById('resultModal').classList.remove('active');
            if (gameData.currentLevel < 8) {
                startGame(gameData.currentLevel + 1);
            }
        }

        function renderWrongList() {
            const container = document.getElementById('wrongList');
            
            if (gameData.wrongList.length === 0) {
                container.innerHTML = `
                    <div class="empty-state">
                        <div class="empty-icon">ğŸ“</div>
                        <div class="empty-text">æš‚æ— é”™é¢˜è®°å½•ï¼Œç»§ç»­åŠ æ²¹ï¼</div>
                    </div>
                `;
                return;
            }
            
            container.innerHTML = '';
            
            gameData.wrongList.forEach((item, index) => {
                const card = document.createElement('div');
                card.className = 'wrong-card';
                card.innerHTML = `
                    <div class="wrong-level">ç¬¬${item.level}å…³</div>
                    <div class="wrong-question">${item.title}</div>
                    <div class="wrong-answers">
                        <div class="wrong-answer-item">
                            ä½ çš„ç­”æ¡ˆï¼š<span class="your-answer">${item.wrongAnswer}</span>
                        </div>
                        <div class="wrong-answer-item">
                            æ­£ç¡®ç­”æ¡ˆï¼š<span class="correct-answer">${item.correctAnswer}</span>
                        </div>
                    </div>
                `;
                container.appendChild(card);
            });
        }

        function clearWrong() {
            if (confirm('ç¡®å®šè¦æ¸…ç©ºé”™é¢˜æœ¬å—ï¼Ÿ')) {
                gameData.wrongList = [];
                saveProgress();
                renderWrongList();
                showToast('é”™é¢˜æœ¬å·²æ¸…ç©ºï¼', 'success');
            }
        }

        function renderAchievement() {
            const grid = document.getElementById('achievementGrid');
            grid.innerHTML = '';
            
            gameData.achievement.forEach(item => {
                const card = document.createElement('div');
                card.className = 'achievement-card ' + (item.unlock ? 'unlock' : 'lock');
                card.innerHTML = `
                    <span class="achievement-icon">${item.icon}</span>
                    <div class="achievement-name">${item.name}</div>
                    <div class="achievement-desc">${item.desc}</div>
                `;
                grid.appendChild(card);
            });
        }

        document.addEventListener('DOMContentLoaded', function() {
            createParticles();
            updateHomeStats();
        });
    </script>
</body>
</html>